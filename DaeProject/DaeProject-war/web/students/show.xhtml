<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:composition template="/templates/skeleton.xhtml"> 
        <ui:define name="main">
            <h2 class="page-header">Proposta de Trabalho: #{studentManager.currentProposal.title}</h2>
            <p:panelGrid columns="2" class="table table-striped" columnClasses="columnWidth">

                <h:outputLabel for="scientificAreas" value="Áreas científicas: " />
                <h:outputText 
                    id="scientificAreas"
                    value="#{studentManager.currentProposal.scientificAreas}"/>

                <h:outputLabel for="objectives" value="Objetivos: " />
                <h:outputText 
                    id="objectives"
                    value="#{studentManager.currentProposal.objectives}"/>

                <h:outputLabel for="workResume" value="Resumo do trabalho: " />
                <h:outputText 
                    id="workResume"
                    value="#{studentManager.currentProposal.workResume}"/>

                <h:outputLabel for="workPlan" value="Plano de trabalho: " />
                <h:outputText 
                    id="workPlan"
                    value="#{studentManager.currentProposal.workPlan}"/>

                <h:outputLabel for="workLocality" value="Localidade do trabalho: " />
                <h:outputText 
                    id="workLocality"
                    value="#{studentManager.currentProposal.workLocality}"/>

                <h:outputLabel for="successRequirements" value="Requisitos fundamentais: " />
                <h:outputText 
                    id="successRequirements"
                    value="#{studentManager.currentProposal.successRequirements}"/>

                <h:outputLabel for="budget" value="Orçamento: " />
                <h:outputText 
                    id="budget"
                    value="#{studentManager.currentProposal.budget} €"/>

                <h:outputLabel for="support" value="Apoios: " />
                <h:outputText 
                    id="support"
                    value="#{studentManager.currentProposal.support}"/>

                <h:outputLabel for="bibliography" value="Bibliografia: " />
                <h:outputText 
                    id="bibliography"
                    value="#{studentManager.currentProposal.bibliographyToString}"/>
            </p:panelGrid>
            <br/>
            <br/>
            <c:choose>
                <c:when test="#{!studentManager.proposalApplied and !studentManager.maxProposalReached}">
                    <h4>Selecione o botão abaixo se deseja candidatar-se a esta proposta <span style="font-style: italic; font-size: 90%">(Apenas se pode candidatar a 5 Propostas de Trabalho)</span></h4>
                    <h:form>
                        <h:commandButton 
                            class="btn btn-bg btn-default"
                            value="Candidatar" 
                            title="Candidatar"
                            actionListener="#{studentManager.enrollStudentInProposal}"> 
                            <f:param name="id" 
                                     id="id" 
                                     value="#{studentManager.currentProposal.id}" /> 
                        </h:commandButton> 
                    </h:form>
                </c:when>
                <c:otherwise>
                    <c:choose>
                        <c:when test="#{studentManager.proposalApplied}">
                            <h4>Já se encontra candidatado a esta proposta!</h4>
                        </c:when>
                        <c:when test="#{studentManager.maxProposalReached}">
                            <h4>Já não é possivel candidatar-se a mais propostas! Apenas se pode candidatar a 5 Propostas de Trabalho</h4>
                        </c:when>
                    </c:choose>
                </c:otherwise>
            </c:choose>
                
            <br/>
            <br/>
            <p:link class="btn btn-primary btn-md" value="Voltar" outcome="/students/index"/>
        </ui:define>
    </ui:composition>
</html>

